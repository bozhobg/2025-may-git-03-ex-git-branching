Some additional work on main
